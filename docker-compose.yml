services:
  forsaj:
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    environment:
      PORT: "3000"
      HOST: "0.0.0.0"
      PUBLIC_BASE_URL: ""
    volumes:
      - /datastore/forsaj/uploads:/app/uploads
      - /datastore/forsaj/app/map.json:/app/map.json
    networks:
      - edge
    labels:
      - 'traefik.enable=true'
      - 'traefik.docker.network=edge'
      - 'traefik.http.routers.forsaj.rule=Host(`forsaj.az`) || Host(`forsaj.octotech.az`)'
      - 'traefik.http.routers.forsaj.entrypoints=web'
      - 'traefik.http.services.forsaj.loadbalancer.server.port=3000'

networks:
  edge:
    external: true
